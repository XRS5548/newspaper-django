{% extends "agent/base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Add Delivery</h4>
    <a href="/agent/delevery" class="btn btn-secondary">
      ‚Üê Back
    </a>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">

      <form method="POST">
        {% csrf_token %}

        <!-- Customer Select -->
        <div class="mb-3">
          <label class="form-label">Select Customer</label>
          <select name="customer" class="form-select" required>
            <option value="">-- Select Customer --</option>
            {% for ac in alloted_customers %}
              <option value="{{ ac.id }}">
                {{ ac.customer.name }} ({{ ac.customer.mobile }})
              </option>
            {% endfor %}
          </select>
        </div>

        <!-- Date -->
        <div class="mb-3">
          <label class="form-label">Delivery Date</label>
          <input
            type="date"
            name="date"
            class="form-control"
            value="{{ today }}"
            required
          >
        </div>

        <!-- Delivered -->
        <div class="form-check mb-3">
          <input
          required
            class="form-check-input"
            type="checkbox"
            name="is_delivered"
            id="deliveredCheck"
          >
          <label class="form-check-label" for="deliveredCheck">
            Delivered
          </label>
        </div>

        <!-- Remarks -->
        <div class="mb-3">
          <label class="form-label">Remarks</label>
          <textarea
            name="remarks"
            class="form-control"
            rows="2"
            placeholder="Optional notes..."
          ></textarea>
        </div>

        <hr>

        <!-- Extra Delivery -->
        <h6>Extra Delivery (Optional)</h6>

        <div class="row">
          <div class="col-md-6 mb-3">
            <label class="form-label">Newspaper</label>
            <select name="extra_newspaper" class="form-select">
              <option value="">-- Select Newspaper --</option>
              {% for paper in newspapers %}
                <option value="{{ paper.id }}">{{ paper.name }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="col-md-6 mb-3">
            <label class="form-label">Quantity</label>
            <input
              type="number"
              name="extra_quantity"
              class="form-control"
              min="1"
              placeholder="e.g. 2"
            >
          </div>
        </div>

        <!-- Submit -->
        <div class="mt-4">
          <button type="submit" class="btn btn-success">
            üíæ Save Delivery
          </button>
        </div>

      </form>

    </div>
  </div>

</div>

{% endblock %}
