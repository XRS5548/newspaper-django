{% extends "agent/base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h4 class="fw-bold mb-0">üìÖ Attendance</h4>
      <small class="text-muted">
        {{ hoker.full_name }} ‚Äî {{ month }}/{{ year }}
      </small>
    </div>

    <div class="d-flex gap-2">
      <a href="/agent/hockers/{{ hoker.id }}/attendance/add/?month={{ month }}&year={{ year }}"
         class="btn btn-sm btn-success">
        ‚ûï Add Attendance
      </a>

      <a href="/agent/hockers"
         class="btn btn-sm btn-outline-secondary">
        ‚Üê Back
      </a>
    </div>
  </div>

  <!-- Month Navigation -->
  <div class="d-flex justify-content-between mb-3">
    <a class="btn btn-sm btn-outline-primary"
       href="?month={{ prev_month }}&year={{ year }}">
      ‚óÄ Previous
    </a>

    <a class="btn btn-sm btn-outline-primary"
       href="?month={{ next_month }}&year={{ year }}">
      Next ‚ñ∂
    </a>
  </div>

  {% if messages %}
  {% for message in messages %}
    <div class="alert 
      {% if message.tags == 'error' %}alert-danger
      {% elif message.tags == 'success' %}alert-success
      {% else %}alert-info{% endif %}
      alert-dismissible fade show"
      role="alert">
      
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {% endfor %}
{% endif %}
  <!-- Calendar -->
  <div class="card shadow-sm">
    <div class="card-body p-0">

      <table class="table table-bordered text-center mb-0">
        <thead class="table-light">
          <tr>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
            <th>Sun</th>
          </tr>
        </thead>

        <tbody>
          {% for week in calendar %}
          <tr>
            {% for day in week %}
              {% if day == 0 %}
                <td class="bg-light"></td>
              {% else %}

                {% if day in full_days %}
                  <td class="bg-success text-white fw-bold">
                    {{ day }}
                  </td>

                {% elif day in half_days %}
                  <td class="bg-warning text-dark fw-bold">
                    {{ day }}
                  </td>

                {% elif day in absent_days %}
                  <td class="bg-danger text-white fw-bold">
                    {{ day }}
                  </td>

                {% else %}
                  <td>{{ day }}</td>
                {% endif %}

              {% endif %}
            {% endfor %}
          </tr>
          {% endfor %}
        </tbody>

      </table>

    </div>
  </div>

  <!-- Legend -->
  <div class="mt-3 d-flex gap-3">
    <span class="badge bg-success">Full Day</span>
    <span class="badge bg-warning text-dark">Half Day</span>
    <span class="badge bg-danger">Absent</span>
    <span class="badge bg-secondary">No Entry</span>
  </div>

</div>

{% endblock %}
