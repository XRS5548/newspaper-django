{% extends "agent/base.html" %}
{% block content %}

<div class="container-fluid mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h4 class="fw-bold mb-0">➕ Create Monthly Bill</h4>
      <small class="text-muted">
        Generate bill for customer (month wise)
      </small>
    </div>

    <a href="/agent/bills/"
       class="btn btn-sm btn-outline-secondary">
      ← Back to Bills
    </a>
  </div>

  <!-- Form -->
  <div class="card shadow-sm">
    <div class="card-body">

      <form method="POST">
        {% csrf_token %}

        <div class="row">

          <!-- Customer -->
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">
              Customer
            </label>
            <select name="customer" class="form-select" required>
              <option value="">-- Select Customer --</option>
              {% for customer in customers %}
                <option value="{{ customer.id }}">
                  {{ customer.name }} {{ customer.surname }}
                </option>
              {% endfor %}
            </select>
          </div>

          <!-- Month -->
          <div class="col-md-3 mb-3">
            <label class="form-label fw-semibold">
              Month
            </label>
            <select name="month" class="form-select" required>
              {% for m in months %}
                <option value="{{ m }}"
                  {% if m == current_month %}selected{% endif %}>
                  {{ m }}
                </option>
              {% endfor %}
            </select>
          </div>

          <!-- Year -->
          <div class="col-md-3 mb-3">
            <label class="form-label fw-semibold">
              Year
            </label>
            <input type="number"
                   name="year"
                   value="{{ current_year }}"
                   class="form-control"
                   required>
          </div>

          <!-- Last Submit Date -->
          <div class="col-md-6 mb-3">
            <label class="form-label fw-semibold">
              Last Submit Date
            </label>
            <input type="date"
                   name="last_submit_date"
                   class="form-control"
                   required>
          </div>

        </div>

        <hr>

        <!-- Info -->
        <div class="alert alert-info mb-3">
          ⚠️ Bill amount will be auto calculated based on
          delivery records after submission.
        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-primary">
          Generate Bill
        </button>

      </form>

    </div>
  </div>

</div>

{% endblock %}
