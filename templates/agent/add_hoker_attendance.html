{% extends "agent/base.html" %}
{% block content %}

<div class="container mt-4">

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h4 class="fw-bold mb-0">➕ Add Attendance</h4>
      <small class="text-muted">
        {{ hoker.full_name }} — {{ month }}/{{ year }}
      </small>
    </div>

    <a href="/agent/hockers/{{ hoker.id }}/attendance/?month={{ month }}&year={{ year }}"
       class="btn btn-sm btn-outline-secondary">
      ← Back
    </a>
  </div>

  {% if messages %}
  {% for message in messages %}
    <div class="alert 
      {% if message.tags == 'error' %}alert-danger
      {% elif message.tags == 'success' %}alert-success
      {% else %}alert-info{% endif %}
      alert-dismissible fade show"
      role="alert">
      
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {% endfor %}
{% endif %}

  <!-- Attendance Form -->
  <div class="card shadow-sm">
    <div class="card-body">

      <form method="POST">
        {% csrf_token %}

        <div class="row g-3">

          <!-- Date -->
          <div class="col-md-4">
            <label class="form-label">Date</label>
            <input type="date"
                   name="date"
                   class="form-control"
                   required>
          </div>

          <!-- Status -->
          <div class="col-md-4">
            <label class="form-label">Attendance Status</label>
            <select name="status" class="form-select" required>
              <option value="">Select</option>
              <option value="present">Full Day</option>
              <option value="half">Half Day</option>
              <option value="absent">Absent</option>
            </select>
          </div>

          <!-- Remarks -->
          <div class="col-md-4">
            <label class="form-label">Remarks</label>
            <input type="text"
                   name="remarks"
                   class="form-control"
                   placeholder="Optional">
          </div>

        </div>

        <!-- Info -->
        <div class="alert alert-info mt-3 mb-0">
          ℹ️ If attendance already exists for selected date, it will be updated.
        </div>

        <!-- Submit -->
        <div class="mt-4 text-end">
          <button type="submit" class="btn btn-success">
            Save Attendance
          </button>
        </div>

      </form>

    </div>
  </div>

</div>

{% endblock %}
