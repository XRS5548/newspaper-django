{% extends "agent/base.html" %}
{% block content %}

<div class="container-fluid mt-4">

  <!-- ================= HEADER ================= -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h4 class="fw-bold mb-0">‚úèÔ∏è Edit Bill</h4>
      <small class="text-muted">
        Update bill details
      </small>
    </div>

    <a href="/agent/bills/"
       class="btn btn-sm btn-outline-secondary">
      ‚Üê Back to Bills
    </a>
  </div>

  <!-- ================= FORM ================= -->
  <div class="card shadow-sm">
    <div class="card-body">

      <form method="POST">
        {% csrf_token %}

        <!-- Customer Info (readonly) -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label fw-semibold">Customer</label>
            <input type="text"
                   class="form-control"
                   value="{{ bill.customer.name }} {{ bill.customer.surname }}"
                   readonly>
          </div>

          <div class="col-md-3">
            <label class="form-label fw-semibold">Month</label>
            <input type="text"
                   class="form-control disabled"
                   value="{{ bill.month }}"
                   readonly >
          </div>

          <div class="col-md-3">
            <label class="form-label fw-semibold">Year</label>
            <input type="text"
                   class="form-control"
                   value="{{ bill.year }}"
                   readonly>
          </div>
        </div>

        <hr>

        <!-- Amounts -->
        <div class="row">

          <div class="col-md-4 mb-3">
            <label class="form-label fw-semibold">
              Base Amount (‚Çπ)
            </label>
            <input type="number"
                   step="0.01"
                   name="base_amount"
                   class="form-control"
                   value="{{ bill.base_amount }}"
                   required>
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label fw-semibold">
              Late Charges (‚Çπ)
            </label>
            <input type="number"
                   step="0.01"
                   name="late_charges"
                   class="form-control"
                   value="{{ bill.late_charges }}">
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label fw-semibold">
              Total Amount (‚Çπ)
            </label>
            <input type="number"
                   step="0.01"
                   name="total_amount"
                   class="form-control"
                   value="{{ bill.total_amount }}"
                   required>
          </div>

        </div>

        <!-- Delivery Info -->
        <div class="row">

          <div class="col-md-4 mb-3">
            <label class="form-label fw-semibold">
              Delivery Days
            </label>
            <input type="text"
                   class="form-control"
                   value="{{ bill.total_delivery_days }}"
                   readonly>
          </div>

          <div class="col-md-4 mb-3">
            <label class="form-label fw-semibold">
              Last Submit Date
            </label>
            <input type="date"
                   name="last_submit_date"
                   class="form-control"
                   value="{{ bill.last_submit_date|date:'Y-m-d' }}"
                   required>
          </div>

          <div class="col-md-4 mb-3 d-flex align-items-end">
            <div class="form-check">
              <input class="form-check-input"
                     type="checkbox"
                     name="is_paid"
                     id="is_paid"
                     {% if bill.is_paid %}checked{% endif %}>
              <label class="form-check-label fw-semibold"
                     for="is_paid">
                Mark as Paid
              </label>
            </div>
          </div>

        </div>

        <hr>

        <!-- Buttons -->
        <div class="d-flex gap-2">
          <button type="submit"
                  class="btn btn-primary">
            üíæ Save Changes
          </button>

          <a href="/agent/bills/"
             class="btn btn-outline-secondary">
            Cancel
          </a>
        </div>

      </form>

    </div>
  </div>

</div>

{% endblock %}
