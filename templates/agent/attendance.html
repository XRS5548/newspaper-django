{% extends "agent/base.html" %}
{% block content %}

<div class="container-fluid mt-4">

  <!-- Top bar -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    
    <!-- Search -->
    <div class="col-md-4">
      <input type="text" class="form-control" placeholder="Search customer...">
    </div>

    <!-- Add Customer -->
    <div>
      <a href="/agent/addcustomer/" class="btn btn-primary">
        + Add Customer
      </a>
    </div>

  </div>

  <!-- Attendance Table -->
  <div class="card shadow-sm mb-4">
    <div class="card-body table-responsive">

      <table class="table table-bordered table-hover align-middle text-center">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Phone</th>
            <th>Address</th>
            <th>PB</th>
            <th>BH</th>
            <th>HT</th>
            <th>Times</th>
            <th>Hindu</th>
            <th>EX</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>

          {% if customers %}
            {% for c in customers %}
            <tr>
              <td>{{ c.id }}</td>
              <td>{{ c.customer.name }}</td>
              <td>{{ c.customer.mobile }}</td>
              <td>{{ c.customer.address }}</td>
              <td>{{ c.PB }}</td>
              <td>{{ c.BH }}</td>
              <td>{{ c.HT }}</td>
              <td>{{ c.TIMES }}</td>
              <td>{{ c.HINDU }}</td>
              <td>0</td>
              <td>
                <a href="/agent/editcustomer/{{c.id}}/" class="btn btn-sm btn-outline-primary">
                  Edit
                </a>
              </td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="11" class="text-center text-muted">
                No customers allotted yet
              </td>
            </tr>
          {% endif %}

        </tbody>
      </table>

    </div>
  </div>

  <!-- Summary / Total Cost Table -->
  <div class="card shadow-sm">
    <div class="card-body table-responsive">

      <h5 class="mb-3">Today Delivery Summary</h5>

      <table class="table table-bordered text-center">
        <thead class="table-secondary">
          <tr>
            <th>Total PB</th>
            <th>Total BH</th>
            <th>Total HT</th>
            <th>Total Times</th>
            <th>Total Hindu</th>
            <th>Total EX</th>
            <th>Total Papers</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>{{ totals.total_pb|default:0 }}</td>
            <td>{{ totals.total_bh|default:0 }}</td>
            <td>{{ totals.total_ht|default:0 }}</td>
            <td>{{ totals.total_times|default:0 }}</td>
            <td>{{ totals.total_hindu|default:0 }}</td>
            <td>{{ total_ex }}</td>
            <td><strong>{{ total_papers }}</strong></td>
          </tr>
        </tbody>
      </table>

    </div>
  </div>

</div>

{% endblock %}
