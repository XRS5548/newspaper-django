{% extends "dashboard.html" %}
{% block content %}

<style>
  .paper-item {
    border: 2px solid #e5e7eb;
    border-radius: 10px;
    padding: 12px 15px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .paper-item input {
    margin-right: 12px;
    transform: scale(1.1);
  }

  /* checked state */
  .paper-item input:checked + label {
    font-weight: 600;
  }

  .paper-item.selected {
    border-color: #16a34a;
    background-color: #dcfce7;
  }
</style>

<div class="container mt-4">
  <h4>Select Your Newspapers</h4>

  <form method="POST">
    {% csrf_token %}

    <div class="card p-3">

      {% for paper in newspapers %}
        <div class="paper-item {% if paper.id in subscribed_ids %}selected{% endif %}">
          
          <input
            type="checkbox"
            name="newspaper"
            value="{{ paper.id }}"
            id="paper{{ paper.id }}"
            {% if paper.id in subscribed_ids %}checked{% endif %}
          >

          <label for="paper{{ paper.id }}" class="mb-0">
            {{ paper.name }}
          </label>

        </div>
      {% empty %}
        <p>No newspapers available</p>
      {% endfor %}

    </div>

    <button type="submit" class="btn btn-success mt-3">
      Save Selection
    </button>
  </form>
</div>

<script>
  // toggle selected class on click
  document.querySelectorAll('.paper-item input').forEach(cb => {
    cb.addEventListener('change', function () {
      this.closest('.paper-item').classList.toggle('selected', this.checked);
    });
  });
</script>

{% endblock %}
