{% extends "dashboard.html" %}
{% block content %}

<div class="container-fluid mt-4">

  <!-- ================= HEADER ================= -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h4 class="fw-bold mb-0">üßæ My Bills</h4>
      <small class="text-muted">
        Monthly newspaper bills
      </small>
    </div>

    <a href="/dashboard/"
       class="btn btn-sm btn-outline-secondary">
      ‚Üê Back
    </a>
  </div>

  <!-- ================= SUMMARY ================= -->
  <div class="row mb-4">

    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h6 class="text-muted">Total Bills</h6>
          <h4 class="fw-bold">{{ total_bills }}</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h6 class="text-muted">Total Amount</h6>
          <h4 class="fw-bold">‚Çπ {{ total_amount }}</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h6 class="text-muted">Paid</h6>
          <h4 class="fw-bold text-success">‚Çπ {{ paid_amount }}</h4>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card shadow-sm text-center">
        <div class="card-body">
          <h6 class="text-muted">Pending</h6>
          <h4 class="fw-bold text-danger">‚Çπ {{ pending_amount }}</h4>
        </div>
      </div>
    </div>

  </div>

  <!-- ================= BILLS TABLE ================= -->
  <div class="card shadow-sm">
    <div class="card-body table-responsive p-0">

      <table class="table table-bordered table-hover mb-0 text-center align-middle">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Month</th>
            <th>Year</th>
            <th>Delivery Days</th>
            <th>Base Amount</th>
            <th>Late Charges</th>
            <th>Total</th>
            <th>Status</th>
            <th>Agent</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
        {% for bill in bills %}
          <tr>
            <td>{{ forloop.counter }}</td>

            <td>{{ bill.month }}</td>
            <td>{{ bill.year }}</td>

            <td>{{ bill.total_delivery_days }}</td>

            <td>‚Çπ {{ bill.base_amount }}</td>

            <td class="text-danger">
              ‚Çπ {{ bill.late_charges }}
            </td>

            <td class="fw-bold">
              ‚Çπ {{ bill.total_amount }}
            </td>

            <td>
              {% if bill.is_paid %}
                <span class="badge bg-success">Paid</span>
              {% else %}
                <span class="badge bg-warning text-dark">Pending</span>
              {% endif %}
            </td>

            <td>
              {{ bill.agent.full_name }}
            </td>

            <!-- ACTION -->
            <td>
              {% if not bill.is_paid %}
                <a href="#"
                   class="btn btn-sm btn-success">
                  üí≥ Pay
                </a>
              {% else %}
                <span class="text-muted">‚Äî</span>
              {% endif %}
            </td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="10" class="text-muted py-3">
              No bills available
            </td>
          </tr>
        {% endfor %}
        </tbody>

      </table>

    </div>
  </div>

</div>

{% endblock %}
